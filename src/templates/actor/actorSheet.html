<form class="{{cssClass}} flexcol" autocomplete="off" autocapitalize="off">

    {{!-- Sheet Header --}}
    <header class="sheet-header">
        {{!-- header --}}
        <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" alt="{{actor.name}}" height="100" width="100"/>
        <div class="header-fields">
            <h1 class="char-name"><input name="name" type="text" value="{{actor.name}}" placeholder="Name" data-dtype="String"></h1>
            <div class="grid grid-2col">
                <div class="info-grid-form">
                    <label class="resource-label" for="data.age">Age</label>
                    <input type="text" name="data.age" value="{{data.age}}" data-dtype="Number">

                    <label class="resource-label" for="data.race">Race</label>
                    <input type="text" name="data.race" value="{{data.race}}" data-dtype="String">

                    <label class="resource-label" for="data.sex">Sex</label>
                    <input type="text" name="data.sex" value="{{data.sex}}" data-dtype="String">

                    <label class="resource-label" for="data.social">Social</label>
                    <input type="text" name="data.social" value="{{data.social}}" data-dtype="String">
                </div>

                <div class="info-grid-form">
                    <label class="resource-label" for="data.imbalance">Imbalance</label>
                    <input type="text" name="data.imbalance" value="{{data.imbalance}}" data-dtype="String">

                    <label class="resource-label" for="data.favour">Favour</label>
                    <input type="text" name="data.favour" value="{{data.favour}}" data-dtype="String">

                    <label class="resource-label" for="data.patron">Patron</label>
                    <input type="text" name="data.patron" value="{{data.patron}}" data-dtype="String">
                </div>
            </div>
        </div>
    </header>

    {{!-- Sheet Tab Navigation --}}
    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="attributes">{{localize "MAELSTROM.sheet.tabs.attributes"}}</a>
        <a class="item" data-tab="equipment">{{localize "MAELSTROM.sheet.tabs.equip"}}</a>
        <a class="item" data-tab="description">{{localize "MAELSTROM.sheet.tabs.description"}}</a>
    </nav>

    {{!-- Sheet Body --}}
    <section class="sheet-body">
        {{!-- Main sheet tab --}}
        <div class="tab attributes active" data-group="primary" data-tab="attributes">
            <div class="resources grid grid-2col">
                <div class="resource flex-group-center">
                    <table class="attributes">
                        <thead>
                        <tr>
                            <td colspan="4">{{localize "MAELSTROM.attribute.title"}}</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>Orig.</td>
                            <td>Temp.</td>
                            <td>Used</td>
                        </tr>
                        </thead>
                        <tbody>
                        {{#each data.attributes as |attribute key|}}
                            <tr>
                                <td><label for="data.attributes.{{key}}.temp" class="resource-label" title="{{localize (concat "MAELSTROM.attribute.detail." key)}}">{{localize (concat "MAELSTROM.attribute.name." key)}}</label></td>
                                <td><input type="text" name="data.attributes.{{key}}.orig" value="{{attribute.orig}}" data-dtype="Number"/></td>
                                <td><input type="text" name="data.attributes.{{key}}.temp" value="{{attribute.temp}}" data-dtype="Number"/></td>
                                <td><input type="checkbox" name="data.attributes.{{key}}.used" {{checked attribute.used}} data-dtype="Boolean"/></td>
                            </tr>
                        {{/each}}
                        </tbody>
                    </table>

                    {{!-- Wounds --}}
                    <table class="wounds">
                        <thead>
                        <tr>
                            <td colspan="2">{{localize "MAELSTROM.wounds.header"}}</td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td colspan="2">
                                <div class="grid-wounds">
                                    <div class="flex-group-left">
                                        {{#each data.wounds.wounds as |wound|}}
                                            {{# if @last}}
                                                <label class="bleeding-damage" title="{{localize "MAELSTROM.wounds.wounds.bleeding.damage"}}">+ <input type="text" class="wound bleeding-damage" name="data.wounds.wounds.[{{@index}}]" value="{{isZeroThenBlank wound}}" data-dtype="Number" title="{{localize "MAELSTROM.wounds.wounds.bleeding.damage"}}"/></label>
                                            {{else}}
                                                <input type="text" class="wound" name="data.wounds.wounds.[{{@index}}]" value="{{isZeroThenBlank wound}}" data-dtype="Number" title="{{localize "MAELSTROM.wounds.wounds.index" index=@index}}"/>
                                            {{/if}}
                                        {{/each}}
                                        <input type="text" name="data.wounds.bloodloss" class="bloodloss wound" value="{{isZeroThenBlank data.wounds.bloodloss}}" data-dtype="Number" title="{{localize "MAELSTROM.wounds.wounds.bleeding.title"}}"/>
                                    </div>
                                    <div class="flex-group-center">
                                        <strong title="{{localize "MAELSTROM.wounds.total.title"}}">{{localize "MAELSTROM.wounds.total.header"}}</strong>
                                        {{#if (gt (calculateTotalWounds data.wounds) 0)}}
                                            <a class="item-control item-heal-wounds" title="{{localize "MAELSTROM.wounds.heal.one"}}"><i class="fas fa-stethoscope fa-border"></i></a>
                                        {{else}}
                                            <i class="fas fa-stethoscope fa-border disabled"></i>
                                        {{/if}}
                                        <br>
                                        {{#if (gt (calculateTotalWounds data.wounds) (currentValueOfAttribute data.attributes "endurance"))}}
                                            {{#if (gt (calculateTotalWounds data.wounds) (add (currentValueOfAttribute data.attributes "endurance") 20))}}
                                                <i class="fas fa-skull-crossbones total-wounds" title="{{localize "MAELSTROM.wounds.total.status.dead"}}"></i>
                                            {{else}}
                                                <i class="fas fa-dizzy total-wounds" title="{{localize "MAELSTROM.wounds.total.status.unconscious"}}"></i>
                                            {{/if}}
                                        {{/if}}
                                        <span class="total-wounds" title="{{localize "MAELSTROM.wounds.total.title"}}">{{calculateTotalWounds data.wounds}}</span>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><label for="data.wounds.injuries" class="resource-label" title="{{localize "MAELSTROM.wounds.injuries.title"}}">{{localize "MAELSTROM.wounds.injuries.label"}}</label></td>
                            <td><textarea name="data.wounds.injuries" rows="2">{{data.wounds.injuries}}</textarea> </td>
                        </tr>
                        <tr>
                            <td><label for="data.wounds.bleeding" class="resource-label" title="{{localize "MAELSTROM.wounds.bleeding.title"}}">{{localize "MAELSTROM.wounds.bleeding.label"}}</label></td>
                            <td><textarea name="data.wounds.bleeding" rows="2">{{data.wounds.bleeding}}</textarea> </td>
                        </tr>
                        <tr>
                            <td><label for="data.wounds.longterm" class="resource-label" title="{{localize "MAELSTROM.wounds.longterm.title"}}">{{localize "MAELSTROM.wounds.longterm.label"}}</label></td>
                            <td><textarea name="data.wounds.longterm" rows="2">{{data.wounds.longterm}}</textarea> </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                {{!-- Next column --}}
                <div class="resource flex-group-center">
                    <table class="characteristics">
                        <thead>
                        <tr>
                            <td>Characteristics</td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><input type="text" name="data.characteristics.characteristic1" value="{{data.characteristics.characteristic1}}" data-dtype="String"/></td>
                        </tr>
                        <tr>
                            <td><input type="text" name="data.characteristics.characteristic2" value="{{data.characteristics.characteristic2}}" data-dtype="String"/></td>
                        </tr>
                        <tr>
                            <td><input type="text" name="data.characteristics.characteristic3" value="{{data.characteristics.characteristic3}}" data-dtype="String"/></td>
                        </tr>
                        </tbody>
                    </table>

                    <table class="abilties">
                        <colgroup>
                            <col>
                            <col class="abilties-firstcolumn">
                            <col>
                            <col class="abilties-thirdcolumn">
                            <col>
                        </colgroup>
                        <thead>
                        <tr>
                            <td colspan="5">Abilities</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>Ability</td>
                            <td>Rank</td>
                            <td>Benefit</td>
                            <td>
                                <div class="item-controls">
                                    <a class="item-control item-create" title="Create ability" data-type="ability"><i class="fas fa-plus"></i></a>
                                </div>
                            </td>
                        </tr>
                        </thead>
                        <tbody>
                        {{#each data.items.abilities as |ability key|}}
                            <tr class="item" data-item-id="{{ability._id}}">
                                <td>{{#ifEmptyOrWhitespace ability.data.notes}}
                                        <i class="fas fa-info-circle disabled"></i>
                                    {{else}}
                                        <span class="tooltip" data-tooltip-content="#tooltip_content_{{ability._id}}"><i class="fas fa-info-circle"></i></span>
                                {{/ifEmptyOrWhitespace}}</td>
                                <td>{{ability.name}}</td>
                                <td>{{ability.data.rank}}</td>
                                <td>{{ability.data.benefit}}</td>
                                <td>
                                    <div class="item-controls">
                                        <a class="item-control item-edit" title="Edit ability"><i class="fas fa-edit"></i></a>
                                        <a class="item-control item-delete" title="Delete ability"><i class="fas fa-trash"></i></a>
                                    </div>
                                </td>
                            </tr>
                        {{/each}}
                        </tbody>
                    </table>

                    <div class="tooltip_templates">
                        {{#each data.items.abilities as |ability key|}}
                        <div id="tooltip_content_{{ability._id}}">
                            <img src="{{ability.img}}" title="{{ability.name}}" alt="{{ability.name}}" height="50"/>
                            <h1 style="display: inline; margin-left: 4px;">{{ability.name}}</h1>
                            <hr>
                            {{!-- raw html output --}}
                            {{{ability.data.notes}}}
                        </div>
                        {{/each}}
                    </div>
                </div>
            </div>
        </div>

        {{!-- equipment / events / supernatural / languages tab --}}
        <div class="tab equipment" data-group="primary" data-tab="equipment">
            <ol class="items-list">
                <li class="item flexrow item-header">
                    <div class="item-image"></div>
                    <div class="item-name">Name</div>
                    <div class="item-controls">
                        <a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add item</a>
                    </div>
                </li>
            </ol>
        </div>

        {{!-- Biography Tab --}}
        <div class="tab biography" data-group="primary" data-tab="description">
            {{editor content=data.biography target="data.biography" button=true owner=owner editable=editable}}
        </div>
    </section>

</form>
